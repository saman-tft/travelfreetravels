!function(t,e,r,n){"use strict";function a(n,a,o,i){function l(){y=e.devicePixelRatio>1,u(o),a("delay")>=0&&setTimeout(function(){c(!0)},a("delay")),(a("delay")<0||a("combined"))&&(i.e=A(a("throttle"),function(t){"resize"===t.type&&(p=v=-1),c(t.all)}),i.a=function(t){u(t),o.push.apply(o,t)},i.g=function(){return o},c(),t(r).on("scroll."+n.name+" resize."+n.name,a("appendScroll"),i.e))}function u(e){if(e=t(e).filter(function(){return!t(this).data(a("handledName"))&&(t(this).attr(a("attribute"))||t(this).attr(a("loaderAttribute")))}).data("plugin_"+n.name,n),a("onError")&&e.on("error."+n.name,function(){h("onError",t(this))}),a("defaultImage")||a("placeholder"))for(var r=0;r<e.length;r++){var o=t(e[r]),i=e[r].tagName.toLowerCase(),l="background-image";"img"==i&&a("defaultImage")&&!o.attr("src")?o.attr("src",a("defaultImage")):"img"==i||!a("placeholder")||o.css(l)&&"none"!=o.css(l)||o.css(l,"url("+a("placeholder")+")")}}function c(e){if(!o.length)return void(a("autoDestroy")&&n.destroy());for(var r=!1,i=a("imageBase")?a("imageBase"):"",l=0;l<o.length;l++)(function(n){if(f(n)||e){var o,l=t(n),u=n.tagName.toLowerCase(),c=l.attr(a("attribute"));l.data(a("handledName"))||a("visibleOnly")&&!l.is(":visible")||!(c&&("img"==u&&i+c!=l.attr("src")||"img"!=u&&i+c!=l.css("background-image"))||(o=l.attr(a("loaderAttribute"))))||(r=!0,l.data(a("handledName"),!0),d(l,u,i,o))}})(o[l]);r&&(o=t(o).filter(function(){return!t(this).data(a("handledName"))}))}function d(e,r,n,o){++b;var i=function(){h("onError",e),g()};if(h("beforeLoad",e),o)e.off("error").one("error",i),e.one("load",function(){a("removeAttribute")&&e.removeAttr(a("loaderAttribute")),h("afterLoad",e),g()}),h(o,e,function(t){t?e.load():e.error()})||e.error();else{var l=t(new Image);l.one("error",i),l.one("load",function(){e.hide(),"img"==r?e.attr("src",l.attr("src")):e.css("background-image","url("+l.attr("src")+")"),e[a("effect")](a("effectTime")),a("removeAttribute")&&e.removeAttr(a("attribute")+" "+a("retinaAttribute")),h("afterLoad",e),l.remove(),g()}),l.attr("src",n+e.attr(a(y&&e.attr(a("retinaAttribute"))?"retinaAttribute":"attribute"))),l.complete&&l.load()}}function f(t){var e=t.getBoundingClientRect(),r=a("scrollDirection"),n=a("threshold"),o=m()+n>e.top&&-n<e.bottom,i=s()+n>e.left&&-n<e.right;return"vertical"==r?o:"horizontal"==r?i:o&&i}function s(){return p>=0?p:p=t(e).width()}function m(){return v>=0?v:v=t(e).height()}function A(t,e){var r,o=0;return function(i,l){function u(){o=+new Date,e.call(n,i)}var c=+new Date-o;r&&clearTimeout(r),c>t||!a("enableThrottle")||l?u():r=setTimeout(u,t-c)}}function g(){--b,o.size()||b||h("onFinishedAll")}function h(e,r,o){return(e=a(e))?(e.apply(n,t(arguments).slice(1)),!0):!1}var b=0,p=-1,v=-1,y=!1;!function(){"event"==a("bind")?l():t(e).on("load",l),t(_lazy_content).ajaxComplete(l())}()}function o(e,r){var o=this,i=t.extend({},o.configuration,r),l={};return o.config=function(t,e){return e===n?i[t]:(i[t]=e,o)},o.addItems=function(e){return l.a&&l.a("string"===t.type(e)?t(e):e),o},o.getItems=function(){return l.g?l.g():{}},o.update=function(t){return l.e&&l.e({},!t),o},o.loadAll=function(){return l.e&&l.e({all:!0},!0),o},o.destroy=function(){t(o.config("appendScroll")).off("."+o.name,l.e),l={}},a(o,o.config,e,l),o.config("chainable")?e:o}t.fn.Lazy=t.fn.lazy=function(t){return new o(this,t)},t.extend(o.prototype,{name:"lazy",configuration:{chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:e,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",retinaAttribute:"data-retina",loaderAttribute:"data-loader",removeAttribute:!0,handledName:"handled",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:null,afterLoad:null,onError:null,onFinishedAll:null}})}(jQuery,window,document);
